<!DOCTYPE html>
<html>
<head>
   <style>
      .grid-container {
         display: grid;
         grid-template: 20px / 50px 50px 50px 50px 50px 50px 50px 50px 50px 50px;
         grid-gap: 3px;
         background-color: #2196F3;
         padding: 3px;
      }
      .grid-container>div {
         background-color: rgba(255, 255, 255, 0.8);
         text-align: center;
         padding: 3px 0;
         font-size: 12px;
      }
   </style>
</head>
<body>

<br>
<canvas id="myCanvas" width="670" height="670" style="border:1px solid #d3d3d3;">
   Your browser does not support the HTML5 canvas tag.
</canvas>


<!--<canvas id="mySpiral" width="670" height="670" style="border:1px solid #d3d3d3;">-->
<!--Your browser does not support the HTML5 canvas tag.-->
<!--</canvas>-->

<br>
<br>

<div id="process">...</div>
<br>
<br>

<div id="info"></div>

<button id="break"> Stop </button>
<button id="iterate"> Go </button>

<div> Angles: </div>
<div id="angleTable" class="grid-container" />

<script>

   console.log("start");
   var kRowLength = 3353;
   //4119;
   //5000;
   //6900;
   var kDrawDelay = 80;
   var kCoef = 10;
   var kDrawLine = false;
   var kDrawBound = false;
   var kLineNum = 5;
   var kWipeLine = true;

   var kUseSpiral = true;

   var kLimitSectorSpiral =
           false;
           //true;

   var kContinuousSpiral =
           true;
           // false;

   var kAngleTable = false;

   var kOld =
           false;
           //true;

   var kOrigCoord =  kOld
           ?
           [4142055, 5854032, 1708780, 3505098, 3103764, 7544757, 3817606, 5761789, 6835280, 8788143, 9729845, 5749842, 9866627, 64540, 1891882, 8087817, 82936, 8196192, 10454554, 10089839, 268676, 8760644, 6848753, 11132982, 4821001, 1938734, 8391435, 4697950, 8208839, 10468564, 4999338, 667255, 9451271, 7163723, 8890208, 836495, 705870, 5934475, 9862681, 8279510, 2300152, 5027196, 1184852, 10630483, 4432027, 713093, 5545786, 5791818, 2029627, 9530864, 4739089, 3144598, 2911053, 5339472, 1688586, 10847542, 11055857, 9866975, 9267019, 5341245, 6367303, 6223835, 3040384, 4067872, 6381839, 1975336, 6123053, 1423364, 6175655, 9771367, 2184120, 7732733, 1414277, 2785330, 9213853, 6910659, 8140406, 9777961, 4144150, 6504075, 3020863, 9727840, 7305212, 9264900, 3465605, 10655217, 1882447, 1437533, 9071553, 6906373, 2037756, 10597396, 7565820, 2876174, 5666177, 10003446, 6490149, 3066240, 6490497, 5809124, 6554084, 7588200, 2183064, 6681673, 5789463, 9452375, 6235189, 4484496, 4429176, 856312, 2602353, 10166170, 3194835, 1902782, 9631577, 3584064, 2297811, 2436273, 8130150, 1155027, 2992724, 7005878, 10361744, 8336981, 10403541, 5313739, 1219461, 4288692, 7299394, 7489580, 983654, 8276822, 11028704, 8612272, 7576147, 2847348, 4461254, 1162574, 5551648, 2976946, 9257486, 10593695, 11213077, 7853514, 6929270, 8803320, 4078792, 9495048, 9790835, 5194535, 6767994,
      3041232, 831012, 11173027, 5917672, 8451782, 8680768, 1394440, 2556237, 3684981, 1911826, 4911713, 5723159, 5325090, 4385828, 2787942, 10289506, 6974679, 4169355, 7119031, 6627069, 2648229, 1678364, 4605443, 8781925, 1632581, 5297260, 9120440, 10558548, 10668989, 4900363, 3659565, 4788396, 4966439, 5437920, 408128, 9920641, 668028, 2639701, 9706820, 953564, 683946, 9460830, 5877376, 7224333, 503454, 411242, 581796, 10830068, 1491013, 862486, 4521844, 6353940, 7614209, 4943975, 6498534, 10868095, 4868971, 6371584, 8391260, 5869633, 316183, 662795, 6275412, 3140972, 9974868, 3165382, 6895879, 8119287, 6235750, 7767103, 870921, 1072769, 7441760, 2725857, 8522240, 4280010, 6259365, 7423184, 9626011, 3235711, 10899781, 6718595, 10062215, 7260190, 8081619, 9862236, 4164022, 7118152, 11008765, 5539080, 1135839, 64967, 10049828, 3753606, 10494229, 9196195, 3035653, 5996371, 3312467, 7153624, 115319, 1150459, 4408141, 9531723, 8748016, 194781, 1235317, 5676830, 1285145, 3504148, 8477917, 10416540, 2438979, 4223335, 5248922, 1897525, 277499, 6925421, 7333314, 9905849, 2493119, 5947865, 3275984, 821271, 5638221, 9958860, 5037310, 4887472, 6006819, 3012982, 3712004, 5714879, 7495957, 10400814, 222929, 7955020, 1420533, 7772313, 2759757, 9797402, 4704395, 2901288, 8539496, 3274050, 1061129, 1726747, 8973572, 3007876, 10883240, 7634198, 5433415, 6448810, 4901378, 829992,
      10426623, 7308888, 1334763, 938779, 7432329, 5876187, 1708601, 1765722, 6238794, 830924, 537470, 1065820, 10987238, 9873946, 5010794, 3193294, 6481863, 4873427, 8300, 7057307, 4210405, 5908510, 6126554, 8902527, 7923126, 5240523, 9761545, 10107636, 4613091, 7615572, 330213, 7198753, 3690446, 3488002, 8752629, 3216240, 2712854, 6135466, 3539112, 1808786, 145048, 7240431, 1536085, 2376211, 2129346, 5717550, 2166892, 4821821, 1793688, 6238822, 2369346, 7751621, 1000713, 6778541, 4295469, 529894, 6418588, 1333422, 1080590, 1009356, 3616338, 6767151, 10635805, 8692983, 2531911, 2556872, 3469045, 9371382, 5136110, 5610030, 5681641, 7612044, 628982, 1042201, 10586815, 1207045, 1695615, 5178823, 556886, 7172574, 4756967, 10444316, 8174917, 1139439, 2847532, 9596033, 5413643, 964429, 5696811, 5837503, 1143630, 3821714, 9334749, 4359602, 9572608, 2136950, 5538176, 3678215, 7163119, 5828590, 769658, 2383979, 181099, 6480603, 4728723, 8539574, 7055201, 1726127, 3115008, 6192242, 3738957, 1751618, 1941489, 936589, 2010276, 7781224, 6874090, 2994370, 3496121, 6355997, 7458908, 2110480, 6246847, 5177589, 5571076, 5872718, 6269811, 10192355, 8666339, 10991202, 6273586, 558040, 3072647, 7908849, 4820442, 4591562, 7127479, 1826307, 3303885, 9633249, 5024504, 1973788, 4824789, 10783977, 10748084, 2385803, 693721, 9631442, 2033334, 2772656, 222968, 931321, 8755575, 7945509, 8470810,
      7498399, 7290821, 1266781, 142564, 2077021, 9952169, 3990923, 2735614, 4847479, 10049976, 179703, 9604502, 7632964, 4095798, 2607003, 1711411, 9036037, 2007340, 2990068, 1954057, 5698572, 926017, 2677510, 3429975, 1655883, 7523019, 4432432, 4153387, 90072, 6375701, 4922086, 4285507, 8708973, 9030141, 5298970, 5307535, 7074165, 2408308, 4915820, 1725597, 6077016, 225579, 5363256, 4238031, 10705434, 2832372, 3669017, 9148930, 7418804, 8202395, 3223395, 657953, 3267373, 6353509, 491631, 10787001, 6314099, 288990, 3249641, 7002731, 10495978, 105410, 3782335, 4452132, 9765431, 6253467, 354150, 8533334, 7909928, 4899370, 3551704, 2736862, 6899487, 4111411, 6143926, 3373522, 2092319, 9477811, 3436722, 8162365, 7457617, 5839314, 7316123, 1429949, 2740796, 1941641, 3356611, 978071, 9291318, 2890313, 5461216, 7226634, 2926626, 3567339, 1517467, 6703348, 6359751, 546739, 1763797, 8239286, 3144193, 5821589, 2183150, 4552766, 403307, 10641142, 1594398, 7042611, 3980882, 8345246, 2731427, 1644507, 7939436, 7182169, 1172494, 5407964, 1294117, 8779519, 5375824, 6400639, 10069722, 7170260, 9304356, 11041411, 244573, 132416, 9913967, 5019184, 294820, 6325770, 368491, 9932402, 8844082, 6715292, 6840118, 8902977, 8106900, 7721199, 8404803, 5034704, 6836763, 2806633, 1055146, 4344409, 4997384, 5498156, 1144869, 1973045, 3816877, 2825661, 1875553, 5620906, 9464713, 2811170, 3265042,
      5978846, 4024406, 8904862, 2491381, 3284551, 1858006, 10457829, 107684, 6828443, 1408871, 4692562, 2588082, 10508548, 1899506, 5391358, 6584668, 4338811, 8036678, 1953257, 9913252, 2337550, 10582101, 9662749, 5392428, 8909565, 3638832, 9572899, 8705881, 1986726, 538976, 6594916, 2534098, 5786341, 258746, 4851462, 7257491, 3126373, 6144669, 5059495, 5832489, 7466251, 8555803, 3060858, 4356694, 10878060, 244511, 9169259, 998394, 4477916, 6235163, 6864653, 977058, 7630980, 6829841, 7405080, 4984472, 6077525, 559064, 4537717, 4477823, 6181525, 6298469, 8409956, 2788100, 8087486, 4282001, 2905194, 5712457, 4295117, 2787198, 9008831, 499069, 370702, 9244619, 8181159, 9586139, 9121376, 9124735, 6209128, 1820071, 4175348, 7328198, 6571869, 5686127, 4843457, 5353678, 7569220, 8833218, 2464293, 78626, 184621, 8903979, 1013037, 7865389, 11033265, 3428700, 7362439, 8192197, 6858952, 418724, 6600556, 3402807, 3860358, 9346556, 2933733, 5907293, 3224319, 4564843, 7533230, 5731696, 9891095, 3897680, 8439615, 6133208, 4253344, 8881190, 2701732, 7301413, 4225119, 5881508, 3081738, 7580591, 8455218, 4080019, 3874049, 7764386, 8007034, 4230083, 4839606, 9308667, 9209729, 1727671, 3267998, 10756341, 5222010, 8486097, 7241680, 6657292, 148197, 10356852, 7702164, 10153052, 2590309, 4638443, 10784031, 9029509, 4866999, 4696233, 5781327, 1337830, 1864702, 7576691, 3910001, 3307170,
      3283735, 7350418, 1351208, 6900898, 11121885, 8670473, 4226245, 3451000, 8599772, 7312540, 2664805, 5472122, 8720570, 597396, 603857, 1686811, 7601977, 7430460, 6087988, 2914464, 10096595, 3573711, 940658, 3335865, 2358415, 2770861, 10271074, 118458, 9101100, 2474371, 5706308, 8698290, 8104568, 1855367, 3121038, 7106858, 7940750, 5966281, 8140038, 648111, 2987649, 8949874, 9776483, 3642965, 9029206, 2654402, 4215276, 2084838, 3973728, 5156448, 7887981, 4440249, 8177250, 4659983, 217240, 7564125, 1085696, 836319, 6004824, 8944880, 8235135, 4677801, 1715402, 9403530, 216215, 1989973, 8570379, 7341306, 1260240, 1024135, 3142363, 3344840, 4608685, 460330, 3136977, 3984022, 9203455, 910223, 5146611, 4813076, 9786321, 8446518, 4213457, 6722085, 1293230, 1940248, 4321386, 7624949, 3878700, 5726223, 8079846, 3549190, 6523938, 8396221, 4917121, 1706128, 550436, 885971, 2435281, 2370184, 9244229, 66943, 5954091, 5882875, 1926038, 1721182, 1163529, 124307, 4797331, 7259398, 3228715, 4098828, 6875189, 4486562, 7432328, 8491255, 11042870, 1214317, 7339195, 8733065, 7768404, 3557644, 3138201, 10776058, 3459035, 934183, 2163642, 6666653, 6308962, 4106490, 1969346, 1166330, 3047513, 658592, 2917721, 7627951, 7551635, 4210713, 5373102, 5333584, 4499474, 6921130, 3345253, 1786344, 5965491, 10834323, 4456732, 6684393, 8914603, 4508069, 5628061, 1473764, 530072, 4349515, 6426113,
      7173546, 6341600, 6563526, 1914005, 6929819, 756750, 8663596, 5363050, 4620825, 3677532, 4028028, 6811339, 8539111, 5891376, 1332551, 9177447, 4906093, 5362452, 1587358, 7180143, 2800482, 1636571, 7452754, 1306744, 6605825, 2679563, 9154297, 5507013, 9837506, 1193976, 2530269, 1147542, 4871674, 5219925, 3127392, 7808825, 9666844, 4418895, 2442707, 266583, 4697013, 5117884, 227750, 1848389, 8526330, 8099741, 4016168, 9606929, 735652, 3895203, 7273374, 5786824, 5802475, 7423526, 9436864, 6749500, 5198696, 876117, 10672966, 10031823, 2469825, 9183237, 7114163, 3452012, 4361078, 6426462, 6805400, 7118409, 1043015, 7011563, 6723773, 8926714, 327877, 5466121, 1402595, 5468825, 7830629, 10438837, 7673092, 1787281, 610037, 5067232, 7869542, 21754, 9980953, 5323994, 7431679, 9785663, 2448750, 5853413, 4298446, 3099833, 1394179, 4598222, 161441, 1862565, 2053061, 3627772, 10648165, 1204118, 7213811, 286117, 8187589, 6656539, 9569849, 3723694, 6850885, 3888550, 1471039, 9033019, 921505, 3991287, 6196781, 8215202, 4494239, 2857095, 7502929, 7103798, 154480, 7203177, 10966667, 1041982, 491629, 2168916, 1132763, 2789086, 6665035, 1250997, 5988587, 5536453, 165970, 8321123, 603635, 10981467, 661526, 5822351, 5602419, 7454638, 5174683, 191546, 3332069, 9046201, 8931636, 4708607, 8583972, 1023143, 3353236, 9632868, 272374, 6545366, 10924933, 4834916, 6677111, 4217667, 7571754,
      8341805, 5676884, 1424925, 475101, 3129022, 1587827, 1731795, 3883579, 9758767, 7211480, 4222760, 4232426, 7833063, 2051757, 1374229, 1764699, 2063557, 9888474, 5003967, 6859902, 1197130, 7055940, 8134909, 825695, 5840140, 7516661, 3135758, 7734341, 1510005, 9279546, 8649274, 10764146, 10245081, 1500632, 1035289, 4855499, 6409532, 6003579, 2612338, 8206948, 2504142, 2996315, 6003690, 4034600, 830635, 1077725, 7790150, 9009097, 1593167, 6874280, 2362867, 9031083, 6889846, 2302220, 3504349, 7152773, 8238283, 2809105, 1798949, 343893, 1224784, 9273849, 8695418, 671533, 4366819, 8317340, 140034, 7228701, 6089898, 2263625, 5612141, 7802356, 1927846, 4732221, 7616005, 2555122, 6279392, 7430306, 6193378, 2047284, 7979965, 3864683, 1678307, 1270051, 6065791, 2891065, 6725748, 2515744, 5357503, 9973264, 4949394, 2100084, 9033934, 1251749, 8944719, 10431502, 5366812, 4954297, 3344523, 8600092, 3219752, 4621364, 3758271, 7512839, 1121301, 3646195, 4570010, 219930, 2469996, 10195843, 1250604, 5034679, 4577436, 1116963, 2193189, 3114678, 9374079, 4803154, 6981521, 83796, 7127974, 5102104, 5339810, 7295306, 1770249, 26557, 7338940, 306605, 3368660, 4941838, 103255, 7106590, 3643597, 5215783, 2314467, 4797423, 1171848, 5311542, 1763143, 4657109, 5394161, 3058213, 7531200, 1819210, 6187175, 4469869, 8019212, 3041115, 10287644, 905918, 4376910, 9430116, 3476248, 9358641, 6025407,
      4950327, 6267588, 4772560, 4466927, 6622337, 3837245, 383861, 3162396, 3094160, 9594873, 5375610, 9770978, 608450, 6412368, 4600401, 5941918, 5397808, 1825359, 5101211, 2498466, 6713452, 9378578, 8684003, 5295755, 6598754, 5783999, 6344339, 3545103, 6484776, 5518680, 9397630, 9351059, 5335499, 2387497, 9528725, 9917733, 10510107, 991135, 667988, 187382, 3628000, 7141692, 3697484, 2194368, 8261023, 2069538, 2884981, 7931264, 3005329, 7554942, 8703453, 6607123, 9210132, 6381699, 7925679, 367613, 3385354, 3250546, 60903, 2998416, 1202994, 8259824, 6516592, 3861540, 1227593, 269590, 10094415, 892517, 7088275, 10675071, 4120971, 723848, 1996815, 10671248, 2491341, 3148346, 4777688, 6465176, 7679654, 2743839, 831627, 2222900, 9162692, 5625772, 8081994, 8743939, 1749706, 1480740, 5498105, 5357358, 1087256, 8106130, 3994962, 732914, 3486125, 2988132, 511724, 1837430, 250712, 7434540, 679146, 6576222, 1791327, 5465896, 352256, 10332352, 1196773, 4858181, 2880284, 199183, 1083838, 999000, 3638787, 7995188, 1241737, 8673169, 1224733, 4431819, 6641493, 6003637, 5504296, 3166579, 4061421, 2311044, 7885070, 2823854, 6069300, 3310327, 10677768, 4349417, 1693915, 4899519, 173567, 7141024, 4793663, 6988528, 1193094, 2393244, 2326628, 3034476, 8089711, 209663, 6824373, 7805348, 8395080, 2695033, 9371851, 352752, 7714428, 69714, 5359086, 8239588, 5060591, 4322417, 3077473, 3985814,
      8131464, 5042239, 3936664, 2153517, 9561053, 3711698, 6297355, 179025, 4911874, 2322501, 5555586, 8389986, 6277707, 1335673, 3734082, 2020202, 3871385, 3701411, 5724770, 9937108, 785019, 5104742, 7083498, 10195794, 8712091, 6302276, 8612151, 8698023, 5312034, 2678740, 7658606, 8766101, 3915701, 8912110, 3329515, 8082985, 4253237, 3484262, 7833669, 8890281, 6923972, 6755658, 6372440, 1224700, 6099307, 3893484, 6213037, 2888014, 3225515, 9265885, 6433, 7161672, 7560683, 4377418, 3160896, 7427599, 5978298, 2838416, 8516384, 4101928, 4411002, 6774447, 1070150, 6121997, 3513923, 9079889, 6965586, 3451444, 159432, 1420688, 3639492, 6056723, 903948, 3760618, 680602, 4352649, 0, 905877, 1132010, 5824879, 5812104, 9220787, 2701127, 2698384, 5764375, 8177798, 384690, 8833826, 1259774, 3248723, 3428638, 1232481, 5004074, 3787303, 2018692, 7188934, 116576, 588842, 7762429, 7548151, 10737302, 8717347, 10616918, 5322094, 4964715, 5463512, 6698211, 1218205, 2709327, 4850170, 9742370, 5317002, 7512775, 861669, 6858114, 403646, 1866224, 4089589, 3259872, 1693122, 3794030, 7813025, 6693328, 9928519, 3137035, 215867, 2170660, 2665541, 6345380, 7368391, 7173541, 862997, 922282, 8121685, 818850, 5794182, 2117888, 10196790, 1081191, 4532485, 2913183, 3698850, 508701, 48035, 4221852, 7156861, 10236755, 546638, 961832, 8779165, 5675814, 3384839, 1316980, 10597878, 1961350, 3771296,
      3615955, 2170107, 296178, 423012, 10331454, 842861, 8182031, 4349599, 7766187, 4925397, 4897384, 8025624, 14939, 2752743, 5933852, 2855384, 1181039, 3030579, 4017505, 6944, 4952355, 4781005, 9037792, 1118107, 8435239, 6071842, 6809277, 4253914, 3247021, 7500024, 9356641, 9935965, 7171781, 4736074, 4218057, 9823590, 5904046, 5043422, 7598611, 9201680, 4836262, 2760417, 8507124, 4772477, 4174650, 3275913, 5825113, 10277645, 223135, 2696469, 4376133, 862743, 3862638, 1266624, 336314, 3878336, 4467117, 3045846, 11009835, 219121, 143622, 1353227, 1246515, 8756317, 9748821, 9391407, 9010997, 7276504, 3786094, 7495004, 4606269, 2482638, 5002052, 1469897, 1941003, 10540540, 6295943, 1111970, 8141835, 9868036, 2807747, 8195236, 1964515, 2477925, 421401, 5917443, 1797116, 2152633, 1698154, 1714607, 4158361, 3098835, 1191150, 5703854, 9163106, 6002524, 5948763, 6250172, 5303559, 8916787, 3736992, 6664847, 6352098, 5415244, 4259075, 1340870, 371065, 7624871, 3450989, 3763369, 1755484, 2775811, 8668616, 3189866, 6539043, 2571405, 1474208, 7055592, 7761143, 6861190, 6807988, 5605615, 4785997, 59169, 10491310, 2515269, 2791360, 3353815, 8333811, 2344400, 9403995, 7869424, 5050893, 10679779, 376057, 5472791, 7513464, 3704746, 621368, 5536335, 9733980, 7882751, 3759468, 2411720, 1449689, 3734448, 4807599, 4431776, 6298633, 118019, 1539947, 3360124, 2180524, 6919825, 2565830,
      7142715, 3109528, 2496453, 3777107, 1647485, 7173882, 8433935, 7444992, 10206269, 2408674, 1993953, 8962637, 9947461, 531585, 8429138, 580179, 1195175, 7490620, 2352852, 3253397, 2832442, 8178550, 9226357, 5841668, 7771375, 4131080, 6363580, 7308995, 6931965, 6494567, 2072972, 1160392, 3070761, 3074576, 3688597, 989885, 5869544, 7060733, 7257456, 1200352, 653063, 3879848, 9354631, 1279841, 9090050, 7052102, 7766585, 1391853, 4534335, 3339300, 8078838, 81692, 5020316, 2856351, 3239766, 6697416, 3135752, 1631616, 1744313, 7941505, 2363551, 2461078, 3655649, 1596013, 6979975, 4124517, 1897034, 6964747, 7423410, 1140556, 6292262, 1669583, 9337191, 4264179, 6739217, 7582079, 5291883, 9371929, 3516728, 3778447, 3723861, 3676462, 8744214, 2677406, 6971086, 200764, 5706057, 4659829, 3273466, 5393978, 1849675, 3969025, 6273549, 834368, 9045984, 3745851, 7362360, 3421832, 1941417, 1993718, 878498, 2997134, 6432694, 7112829, 7179528, 3061910, 53971, 6101052, 8412753, 6722977, 1267223, 3197055, 7907972, 5065548, 3626524, 6721329, 6467750, 8002261, 5223989, 1046050, 414042, 2904916, 4956438, 7565268, 5704973, 7496112, 6271191, 1299104, 3056994, 138838, 3022024, 794238, 2713870, 8763143, 9527404, 2808001, 2598175, 10616448, 204658, 4490280, 1683295, 219389, 3128409, 4956412, 6712000, 1405711, 866318, 8504897, 4694995, 1035067, 2752284, 3561819, 10177419, 3872035, 2476210,
      2817377, 2313494, 10041478, 4266802, 4260506, 3025593, 87383, 1869142, 7812426, 5816541, 2145669, 3481628, 103470, 1961057, 3190973, 4517841, 2750099, 5451788, 4861850, 460373, 7168999, 262893, 7196992, 4962805, 3868968, 6020352, 2469269, 6008040, 7932025, 9198617, 8957083, 884340, 2058182, 1165827, 1245340, 7994700, 3127120, 1064106, 2691786, 6013217, 4484497, 10502330, 1640054, 1759231, 6745431, 6988501, 5527377, 2789827, 862434, 3726168, 447363, 9382859, 1822443, 5877278, 3130377, 1036135, 8573579, 4786954, 5814041, 9543638, 10420517, 7421735, 272085, 3652116, 3255747, 822525, 817446, 160604, 577576, 4054253, 8127203, 2563640, 4809890, 9414627, 7055998, 4038336, 4324843, 4957586, 6929821, 1118223, 3118850, 1886386, 117949, 5259064, 1937255, 620078, 4807345, 6345207, 184583, 3300760, 7930617, 2020396, 4302509, 7104146, 5641387, 4419911, 1668755, 2563455, 8206644, 9559797, 1945535, 1252480, 474123, 2481234, 619991, 1191975, 5155460, 6441922, 1940413, 5144200, 3037139, 2600731, 8926432, 5126663, 3292063, 1831507, 1764201, 6253629, 10297963, 3444455, 2919793, 896221, 8017285, 922365, 9435632, 2061485, 2851642, 1359501, 5588298, 608328, 3040512, 10086461, 3193296, 4876074, 4314971, 7903832, 4435226, 638118, 5665365, 3697753, 4256574, 1602946, 2385661, 2302010, 5410592, 1997470, 5777224, 1637189, 3564025, 2710580, 4959927, 5414747, 1127975, 7905843, 1716385, 1825709,
      4559899, 7053407, 4479063, 1335520, 9557500]
           :
     [3598742, 6028076, 1872508, 3427389, 9590790, 1327383, 5613473, 346925, 9680981, 8913417, 356377, 2395572, 1795166, 4661253, 8274548, 2621515, 5766095, 7202035, 3728756, 9763079, 9726742, 8463772, 611072, 9329944, 1670360, 8390857, 9684895, 6358905, 7662831, 3264084, 9142308, 8385509, 11115405, 5291242, 8396876, 8107354, 1291220, 5137335, 5139591, 3675317, 6171064, 1602931, 9703919, 3800086, 11159599, 3822229, 7134170, 6969029, 9876480, 4442195, 7290919, 11007178, 435226, 9808986, 7901111, 2394281, 8432385, 3094874, 10172903, 2237554, 7617961, 4611166, 6950239, 1325542, 10444754, 1790436, 64488, 602442, 5725487, 1421045, 10106524, 8906809, 10398554, 9882632, 4910460, 10922364, 8529150, 9799184, 2358779, 6690764, 6697782, 1685391, 10336904, 8701090, 7736075, 10657452, 10766366, 64719, 6227206, 9541335, 4880728, 4815864, 10005673, 11089459, 8374478, 8484501, 3987833, 4940483, 4011666, 9015881, 4443021, 3627316, 8404866, 5458108, 9169711, 6963461, 6450502, 521089, 709163, 4519563, 3545526, 11223670, 5753216, 26036, 4823943, 2467457, 9099952, 10542652, 6045452, 7750833, 5856939, 3432963, 9199972, 3419197, 1796260, 2915397, 3148121, 10415457, 3433365, 2549997, 8419890, 10504833, 6452992, 8388464, 9526915, 476387, 9495311, 578701, 3423010, 4948238, 9825893, 5075583, 5705195, 4964143, 8807570, 1080942, 7280538, 8283074, 687515, 9805665, 1310277, 5935497,
      4142055, 5854032, 1708780, 3505098, 3103764, 7544757, 3817606, 5761789, 6835280, 8788143, 9729845, 5749842, 9866627, 64540, 1891882, 8087817, 82936, 8196192, 10454554, 10089839, 268676, 8760644, 6848753, 11132982, 4821001, 1938734, 8391435, 4697950, 8208839, 10468564, 4999338, 667255, 9451271, 7163723, 8890208, 836495, 705870, 5934475, 9862681, 8279510, 2300152, 5027196, 1184852, 10630483, 4432027, 713093, 5545786, 5791818, 2029627, 9530864, 4739089, 3144598, 2911053, 5339472, 1688586, 10847542, 11055857, 9866975, 9267019, 5341245, 6367303, 6223835, 3040384, 4067872, 6381839, 1975336, 6123053, 1423364, 6175655, 9771367, 2184120, 7732733, 1414277, 2785330, 9213853, 6910659, 8140406, 9777961, 4144150, 6504075, 3020863, 9727840, 7305212, 9264900, 3465605, 10655217, 1882447, 1437533, 9071553, 6906373, 2037756, 10597396, 7565820, 2876174, 5666177, 10003446, 6490149, 3066240, 6490497, 5809124, 6554084, 7588200, 2183064, 6681673, 5789463, 9452375, 6235189, 4484496, 4429176, 856312, 2602353, 10166170, 3194835, 1902782, 9631577, 3584064, 2297811, 2436273, 8130150, 1155027, 2992724, 7005878, 10361744, 8336981, 10403541, 5313739, 1219461, 4288692, 7299394, 7489580, 983654, 8276822, 11028704, 8612272, 7576147, 2847348, 4461254, 1162574];

   var aColors = ["#FF0000", "#ff3232", "#ff4b4b", "#ff6464", "#ff7d7d", "#ff9696", "#ffafaf", "#ffc8c8", "#ffdcdc", "#dcdcdc", "#e1e1e1"
      //   "#ff3c3c", "#ff7878", "#787878", "#323232", "#969696", "#c8c8c8"
   ];


   (function (){

      var kCanvasDefaultWidth = 1000;

      var kTotal = 11238513;

      var aCanvas = document.getElementById("myCanvas");
      var aContext = aCanvas.getContext("2d");
      var anAngleTable = document.getElementById("angleTable");
      aCanvas.width = kRowLength / kCoef + 50;
      aCanvas.height = 11238513 / kRowLength / kCoef + 50;

      var anInfo = document.getElementById("info");
      console.log("anInfo");
      anInfo.innerHTML = "Canvas size: " + aCanvas.width + "x" + aCanvas.height;


      var aCoord = [];
      var aBoundCoord = [];
      var anInd = 0;

      if (kContinuousSpiral)
      {
         kCanvasDefaultWidth =400;

                  // test;
//         for (var i = 500; i > -1; i--)
//         {
//            var aGameInd = i;
//                    //(kOrigCoord.length - i+1 )
//                   // *kTotal + kOrigCoord[i];
//            aCoord[i] = spiral( aGameInd);
//         }

         var aGameInd = 0;

         var aThreshold = kTotal/2048;
         for (var i = 0; Math.max(Math.abs(spiral(aGameInd)[0]), Math.abs(spiral(aGameInd)[1])) < aThreshold; i++)
         {
            aGameInd += kTotal;
         }

         for (var i = 0; i < kOrigCoord.length ; i++)
         {
            aGameInd += kOrigCoord[i];
            aCoord[i] = spiral( aGameInd);
            aGameInd += kTotal - kOrigCoord[i];
            aBoundCoord[i] = spiral(aGameInd);
         }

//         for (var i = kOrigCoord.length - 1; i > -1; i--)
//         {
//            var aGameInd = i*kTotal + kOrigCoord[i];
//            aCoord[i] = spiral( aGameInd);
//         }
         var aFarGalaxy = Math.max(Math.abs(aCoord[aCoord.length-1][0]), Math.abs(aCoord[aCoord.length-1][1]));
         //var aFarGalaxy = Math.max(Math.abs(aCoord[0][0]), Math.abs(aCoord[0][1]));


         var aRatio = aFarGalaxy / kCanvasDefaultWidth * 2;
         for (var i = aCoord.length - 1; i > -1; i--)
         {
            aCoord[i] = [Math.round((aCoord[i][0] +aFarGalaxy)/ aRatio) , Math.round((aCoord[i][1] + aFarGalaxy) / aRatio) ];
            aBoundCoord[i] = [Math.round((aBoundCoord[i][0] +aFarGalaxy)/ aRatio) , Math.round((aBoundCoord[i][1] + aFarGalaxy) / aRatio) ];
         }
         aCanvas.width = kCanvasDefaultWidth + 10;
         aCanvas.height = kCanvasDefaultWidth + 10;
      } else if (kLimitSectorSpiral)
      {
         var aLastInd = 0;
         var aLastX =0;
         for (var i = kOrigCoord.length - 1; i > -1; i--)
         {
            var aGameInd = aLastInd + kOrigCoord[i];
            aCoord[i] = spiral( aGameInd );
            while (aCoord[i][0] < aLastX || aCoord[i][1] < 0 || aCoord[i][1] > aCanvas.height )
            {
               aGameInd += kTotal;
               aCoord[i] = spiral( aGameInd );
            }
            aLastInd = aGameInd - kOrigCoord[i];
            aLastX = aCoord[i][0];
         }
         // scale

         aCanvas.width = kCanvasDefaultWidth;
         //var aMaxX = aCoord[aCoord.length - 1][0];
         var aRatio = kCanvasDefaultWidth / aCoord.length;

         var aLastC = 0;
         for (var i = 0; i < aCoord.length; i++)
         {
            console.log(i + " : " + aCoord[i] + " diff: " + (i > 0 ? (aLastC - aCoord[i][0] )   : ""));
            aLastC = aCoord[i][0];
            aCoord[i][0] = Math.round(i * aRatio) ;
         }

      } else if (kUseSpiral )
      {
         var aCenter = Math.ceil(kRowLength/kCoef/ 2);
         for (var i = kOrigCoord.length - 1; i > -1; i--)
         {
            aCoord[i] = spiral( kOrigCoord[i] );
            aCoord[i] = [aCoord[i][0] / kCoef + aCenter , aCoord[i][1] / kCoef + aCenter];
         }
      } else
      {
         for (var i = kOrigCoord.length - 1; i > -1; i--)
         {
            aCoord[i] = [kOrigCoord[i] % kRowLength / kCoef, kOrigCoord[i] / kRowLength / kCoef];
         }
      }

      console.log("aCoord: " + aCoord.length + ": " + aCoord);
      //var aCoord = [[290, 570], [205, 79], [561, 267], [409, 420], [634, 271], [335, 108], [600, 102], [564, 471], [273, 67], [601, 322], [168, 295], [271, 161], [627, 212], [185, 97], [1, 344], [487, 119], [440, 322], [370, 137], [335, 142], [42, 95], [323, 253], [549, 220], [429, 337], [209, 38], [512, 264], [162, 471], [602, 257], [162, 290], [248, 190], [127, 601], [538, 181], [287, 36], [440, 333], [307, 81], [318, 170], [548, 122], [58, 562], [58, 55], [52, 478], [194, 53], [536, 174], [184, 205], [180, 614], [56, 373], [104, 105], [153, 109], [554, 196], [655, 305], [149, 532], [431, 155], [534, 181], [139, 306], [475, 115], [161, 384], [379, 307], [332, 71], [607, 36], [2, 148], [270, 28], [362, 74], [159, 116], [78, 570], [370, 489], [352, 152], [462, 99], [131, 263], [328, 336], [498, 423], [122, 256], [378, 120], [154, 473], [281, 196], [33, 11], [266, 378], [499, 286], [625, 36], [514, 115], [312, 313], [118, 7], [400, 112], [112, 186], [334, 66], [504, 413], [370, 295], [565, 257], [264, 240], [257, 420], [551, 561], [337, 286], [389, 152], [576, 484], [95, 241], [172, 34], [602, 9], [533, 48], [208, 49], [667, 194], [139, 217], [98, 16], [309, 442], [549, 621], [200, 569], [658, 346], [444, 285], [662, 511], [11, 61], [405, 186], [564, 350], [352, 108], [233, 559], [282, 26], [197, 222], [142, 51], [26, 166], [326, 329], [169, 416], [509, 402], [451, 104], [87, 97], [146, 626], [307, 267], [257, 358], [536, 160], [241, 63], [424, 186], [229, 476], [275, 74], [467, 69], [558, 122], [500, 52], [244, 534], [267, 548], [436, 473], [563, 358], [292, 147], [343, 359], [591, 230], [73, 296], [290, 429], [271, 15], [57, 427], [202, 27], [0, 290], [632, 325], [127, 164], [270, 269], [454, 190], [581, 116], [576, 6], [242, 207], [620, 127], [487, 346], [657, 465], [304, 111], [41, 5], [237, 180], [439, 254], [357, 254], [519, 598], [655, 137], [171, 168], [339, 147], [534, 230], [212, 607], [186, 212], [564, 164], [468, 61], [159, 280], [337, 507], [248, 51], [160, 83], [529, 400], [135, 295], [12, 186], [288, 13], [17, 100], [122, 267], [25, 12], [170, 633], [590, 154], [308, 167], [306, 568], [350, 522], [258, 161], [586, 47], [194, 180], [273, 8], [482, 182], [298, 77], [216, 374], [431, 447], [304, 340], [180, 451], [140, 295], [243, 173], [324, 24], [653, 62], [3, 311], [400, 477], [633, 385], [383, 400], [386, 216], [503, 302], [319, 471], [329, 190], [628, 75], [42, 401], [15, 501], [389, 363], [64, 3], [124, 182], [151, 428], [223, 424], [328, 383], [581, 178], [2, 52], [407, 118], [6, 115], [354, 204], [505, 439], [110, 223], [588, 539], [564, 49], [17, 374], [485, 236], [434, 110], [470, 321], [187, 195], [502, 277], [520, 340], [587, 11], [39, 415], [342, 159], [588, 521], [314, 219], [406, 222], [593, 225], [556, 209], [58, 559], [169, 315], [189, 452], [608, 401], [503, 254], [487, 556], [628, 99], [406, 375], [107, 68], [644, 442], [113, 415], [517, 113], [65, 246], [476, 416], [667, 95], [175, 218], [665, 146], [607, 140], [320, 473], [150, 104], [411, 97], [139, 187], [295, 399], [153, 193], [589, 170], [175, 299], [244, 4], [292, 481], [613, 199], [215, 270], [71, 83], [207, 463], [148, 420], [13, 542], [469, 76], [622, 557], [85, 231], [516, 38], [666, 71], [312, 432], [533, 421], [358, 350], [150, 59], [59, 220], [645, 183], [553, 183], [50, 69], [163, 123], [631, 387], [262, 413], [561, 435], [587, 379], [36, 246], [494, 463], [148, 348], [450, 550], [116, 487], [502, 168], [197, 194], [479, 140], [3, 446], [301, 71], [22, 34], [609, 502], [362, 31], [492, 593], [13, 534], [454, 118], [244, 143], [618, 608], [266, 444], [228, 503], [363, 427], [232, 98], [325, 225], [364, 148], [259, 185], [165, 426], [157, 153], [517, 412], [214, 130], [83, 200], [184, 91], [132, 7], [339, 375], [492, 264], [550, 286], [511, 222], [238, 86], [182, 143], [151, 224], [640, 470], [44, 580], [106, 330], [212, 37], [606, 220], [548, 448], [139, 326], [104, 22], [94, 637], [255, 301], [657, 469], [436, 560], [130, 139], [321, 497], [163, 200], [332, 166], [103, 150], [625, 625], [433, 3], [253, 285], [550, 334], [279, 406], [190, 409], [460, 462], [176, 420], [448, 87], [601, 153], [138, 390], [232, 190], [222, 517], [576, 165], [373, 104], [260, 224], [150, 205], [29, 454], [447, 22], [604, 79], [153, 254], [29, 323], [303, 378], [487, 397], [350, 222], [232, 531], [493, 316], [36, 372], [108, 354], [130, 358], [542, 546], [80, 340], [167, 71], [132, 184], [128, 248], [244, 102], [307, 101], [1, 128], [652, 107], [550, 352], [455, 25], [11, 147], [602, 117], [100, 488], [257, 167], [31, 588], [150, 485], [425, 66], [472, 375], [412, 628], [593, 115], [256, 87], [545, 298], [283, 148], [520, 274], [209, 447], [111, 225], [98, 434], [297, 537], [601, 560], [330, 581], [326, 522], [510, 74], [393, 80], [559, 8], [235, 13], [387, 656], [264, 181], [184, 266], [453, 231], [202, 20], [508, 75], [667, 230], [204, 51], [93, 261], [131, 160], [367, 13], [140, 613], [190, 347], [6, 195], [33, 249], [231, 284], [112, 507], [179, 164], [247, 288], [209, 548], [142, 453], [102, 300], [553, 352], [530, 585], [667, 251], [327, 282], [613, 427], [205, 592], [354, 558], [543, 447], [263, 193], [462, 253], [537, 406], [582, 362], [488, 503], [311, 66], [291, 539], [596, 285], [665, 295], [47, 0], [122, 239], [564, 180], [156, 70], [396, 170], [479, 353], [656, 164], [305, 0], [379, 478], [400, 292], [638, 293], [127, 463], [151, 259], [142, 488], [251, 50], [172, 616], [106, 25], [222, 17], [143, 129], [284, 215], [504, 224], [639, 116], [479, 632], [520, 78], [332, 201], [507, 338], [202, 523], [574, 57], [19, 32], [9, 610], [311, 426], [85, 251], [218, 2], [479, 30], [98, 220], [555, 173], [516, 270], [305, 64], [63, 608], [429, 126], [39, 345], [143, 48], [143, 484], [41, 55], [255, 51], [294, 427], [370, 439], [300, 378], [651, 158], [253, 129], [255, 12], [396, 187], [57, 592], [148, 399], [107, 466], [357, 226], [642, 100], [151, 194], [456, 243], [391, 111], [257, 24], [245, 409], [660, 51], [411, 448], [499, 317], [381, 581], [346, 289], [20, 161], [213, 72], [454, 399], [295, 325], [455, 296], [176, 317], [264, 633], [580, 519], [199, 640], [109, 450], [46, 463], [413, 35], [514, 6], [20, 428], [37, 120], [353, 225], [279, 298], [386, 73], [374, 204], [603, 193], [479, 75], [404, 526], [489, 22], [636, 487], [113, 343], [514, 160], [392, 161], [7, 550], [271, 346], [143, 347], [409, 67], [113, 54], [0, 0], [91, 259], [659, 40], [381, 224], [398, 53], [241, 361], [297, 217], [473, 84], [368, 9], [241, 205], [281, 415], [663, 541], [666, 209], [554, 365], [108, 63], [277, 404], [361, 263], [241, 244], [623, 507], [355, 169], [650, 356], [140, 443], [474, 188], [350, 261], [604, 450], [603, 427], [616, 0], [309, 552], [656, 192], [216, 172], [656, 370], [130, 232], [40, 363], [171, 73], [348, 380], [543, 402], [5, 413], [295, 530], [212, 467], [99, 207], [326, 253], [451, 482], [667, 198], [637, 531], [550, 233], [271, 522], [70, 456], [609, 159], [176, 316], [68, 518], [329, 513], [397, 375], [199, 519], [534, 608], [392, 422], [295, 304], [83, 46], [433, 592], [239, 341], [610, 220], [404, 230], [339, 120], [438, 222], [235, 79], [178, 374], [156, 500], [603, 331], [445, 138], [616, 292], [263, 10], [84, 375], [656, 221], [330, 570], [178, 128], [48, 234], [536, 300], [87, 485], [490, 237], [554, 183], [80, 257], [182, 301], [253, 491], [198, 319], [530, 4], [505, 460], [137, 21], [43, 559], [514, 160], [504, 500], [583, 465], [203, 407], [355, 12], [455, 482], [2, 181], [599, 138], [511, 142], [555, 71], [175, 416], [445, 285], [497, 425], [512, 10], [157, 292], [130, 101], [115, 259], [363, 636], [183, 197], [74, 362], [125, 168], [433, 470], [165, 137], [187, 242], [269, 188], [404, 328], [353, 358], [510, 396], [501, 264], [177, 73], [462, 517], [225, 74], [327, 476], [156, 217], [631, 59], [163, 64], [271, 11], [11, 171], [607, 289], [621, 71], [351, 616], [38, 21], [101, 326], [165, 106], [197, 392], [368, 40], [187, 443], [518, 14], [667, 109], [413, 30], [121, 178], [471, 207], [392, 43], [307, 238], [385, 483], [176, 64], [523, 319], [507, 327], [413, 88], [558, 104], [533, 521], [252, 482], [558, 335], [459, 546], [642, 132], [16, 49], [217, 163], [256, 458], [118, 385], [603, 284], [646, 187], [12, 148], [400, 636], [356, 119], [590, 43], [26, 245], [494, 636], [6, 422], [123, 53], [377, 602], [270, 16], [79, 73], [447, 230], [342, 388], [277, 492], [524, 71], [166, 178], [109, 3], [297, 193], [435, 201], [427, 21], [508, 472], [188, 380], [558, 549], [342, 394], [483, 519], [126, 450], [208, 179], [283, 473], [280, 172], [147, 123], [516, 492], [301, 130], [495, 220], [631, 425], [10, 216], [593, 11], [148, 39], [400, 59], [361, 626], [582, 591], [570, 568], [32, 142], [175, 318], [579, 557], [504, 560], [599, 329], [14, 386], [196, 211], [92, 378], [14, 345], [10, 393], [273, 315], [617, 517], [47, 559], [149, 400], [96, 149], [259, 304], [265, 108], [566, 321], [80, 354], [17, 274], [286, 382], [311, 36], [67, 582], [150, 320], [388, 572], [538, 184], [103, 188], [323, 22], [282, 228], [32, 395], [146, 266], [248, 284], [166, 373], [259, 295], [13, 359], [83, 558], [508, 207], [296, 562], [249, 261], [121, 54], [128, 613], [659, 181], [437, 478], [64, 266], [178, 369], [376, 108], [72, 449], [55, 182], [507, 321], [629, 277], [563, 105], [78, 316], [330, 69], [526, 286], [179, 138], [373, 311], [447, 217], [316, 423], [533, 6], [573, 294], [449, 200], [296, 18], [515, 437], [617, 1], [643, 105], [506, 435], [366, 318], [438, 304], [569, 425], [664, 4], [115, 416], [331, 286], [488, 559], [618, 185], [65, 130], [82, 66], [118, 273], [365, 300], [657, 74], [544, 608], [437, 147], [397, 13], [644, 272], [296, 217], [279, 66], [423, 448], [582, 224], [186, 275], [174, 192], [600, 512], [316, 199], [383, 295], [402, 320], [63, 622], [453, 533], [216, 74], [190, 538], [221, 125], [73, 295], [288, 594], [552, 319], [198, 150], [596, 401], [155, 172], [42, 361], [523, 75], [361, 100], [405, 230], [635, 475], [390, 122], [77, 369], [11, 443], [515, 374], [27, 152], [268, 454], [227, 282], [644, 114], [655, 465], [514, 334], [70, 135], [170, 363], [597, 431], [512, 8], [380, 496], [242, 260], [186, 40], [217, 518], [560, 553], [187, 73], [377, 20], [348, 107], [528, 167], [663, 491], [164, 426], [92, 209], [412, 137], [556, 410], [290, 538], [471, 140], [126, 410], [98, 95], [587, 537], [226, 464], [282, 64], [488, 49], [188, 240], [364, 358], [417, 178], [560, 149], [431, 489], [70, 155], [341, 358], [389, 382], [71, 289], [513, 61], [368, 89], [333, 611], [203, 642], [377, 515], [359, 553], [231, 90], [464, 461], [140, 187], [517, 448], [513, 348], [171, 49], [106, 485], [245, 420], [21, 71], [603, 409], [258, 298], [95, 589], [292, 123], [204, 105], [570, 81], [614, 122], [91, 467], [188, 252], [266, 251], [506, 430], [307, 582], [161, 231], [329, 103], [371, 94], [134, 186], [465, 28], [650, 84], [51, 338], [578, 497], [136, 451], [589, 251], [257, 398], [648, 288], [171, 651], [62, 390], [156, 16], [610, 574], [47, 200], [95, 61], [58, 512], [199, 280], [519, 532], [632, 539], [508, 198], [85, 11], [200, 308], [183, 444], [581, 334], [308, 347], [197, 39], [78, 655], [19, 36], [466, 496], [334, 9], [130, 330], [25, 357], [65, 74], [524, 397], [548, 166], [560, 67], [575, 129], [418, 29], [510, 62], [471, 654], [186, 429], [48, 9], [428, 423], [453, 447], [67, 170], [243, 268], [70, 490], [87, 369], [243, 238], [556, 54], [7, 538], [485, 87], [484, 231], [141, 408], [372, 222], [77, 570], [166, 397], [583, 488], [222, 17], [301, 430], [78, 71], [478, 635], [635, 216], [205, 122], [330, 111], [99, 9], [251, 274], [536, 83], [332, 184], [650, 256], [485, 349], [212, 146], [321, 583], [286, 443], [556, 317], [485, 595], [327, 1], [10, 469], [169, 302], [628, 36], [26, 106], [285, 457], [189, 622], [274, 467], [16, 326], [208, 83], [146, 326], [527, 19], [205, 532], [201, 401], [88, 418], [46, 62], [668, 424], [432, 405], [422, 383], [435, 260], [355, 205], [490, 424], [544, 547], [403, 147], [600, 598], [73, 636], [196, 52], [309, 310], [652, 402], [304, 562], [667, 442], [357, 346], [579, 345], [143, 433], [474, 232], [269, 43], [116, 573], [525, 239], [449, 483], [600, 508], [177, 110], [619, 13], [241, 305], [562, 280], [339, 15], [344, 145], [598, 263], [29, 576], [608, 465], [479, 186], [531, 311], [623, 290], [163, 68], [421, 150], [61, 71], [631, 586], [277, 328], [121, 546], [103, 159], [83, 394], [485, 77], [477, 444], [61, 97], [145, 167], [274, 428], [277, 94], [201, 319], [130, 292], [57, 547], [282, 79], [31, 351], [474, 509], [279, 406], [215, 240], [528, 219], [78, 275], [320, 319], [559, 516], [465, 45], [504, 413], [559, 114], [341, 391], [215, 378], [295, 427], [353, 383], [134, 259], [59, 31], [359, 87], [345, 335], [327, 268], [465, 531], [372, 398], [119, 265], [156, 646], [100, 355], [509, 106], [462, 199], [107, 412], [620, 268], [462, 318], [319, 320], [539, 251], [135, 450], [645, 454], [122, 174], [280, 39], [597, 181], [567, 69], [227, 117], [483, 244], [393, 376], [177, 397], [191, 129], [409, 55], [418, 206], [573, 642], [629, 187], [22, 212], [571, 463], [370, 520], [566, 437], [106, 72], [288, 658], [291, 506], [416, 443], [49, 267], [307, 410], [292, 244], [625, 192], [30, 433], [508, 286], [49, 7], [7, 69], [218, 102], [283, 114], [342, 350], [503, 355], [647, 3], [1, 551], [593, 141], [200, 145], [155, 52], [108, 32], [560, 101], [324, 293], [61, 500], [470, 389], [343, 211], [493, 481], [530, 341], [526, 231], [45, 454], [544, 257], [442, 115], [465, 77], [534, 400], [417, 251], [62, 503], [453, 583], [304, 287], [621, 306], [312, 54], [564, 548], [131, 237], [384, 187], [193, 27], [332, 274], [379, 199], [120, 187], [294, 61], [573, 75], [317, 437], [22, 511], [328, 118], [324, 12], [343, 560], [403, 102], [73, 279], [33, 491], [485, 533], [590, 358], [284, 49], [535, 64], [622, 451], [529, 12], [533, 277], [527, 487], [175, 264], [345, 470], [577, 307], [84, 237], [525, 124], [111, 251], [435, 158], [586, 538], [321, 217], [497, 583], [143, 533], [25, 178], [196, 38], [461, 485], [258, 355], [169, 473], [370, 423], [549, 186], [231, 110], [73, 483], [121, 518], [571, 340], [642, 147], [211, 542], [220, 7], [167, 612], [256, 165], [251, 140], [596, 198], [363, 56], [553, 213], [142, 602], [141, 173], [458, 363], [42, 443], [145, 453], [50, 100], [63, 36], [112, 35], [554, 520], [5, 326], [504, 158], [600, 436], [536, 512], [152, 205], [293, 252], [593, 517], [667, 663], [84, 411], [660, 80], [128, 438], [229, 195], [222, 197], [80, 233], [452, 451], [86, 111], [667, 79], [151, 344], [406, 280], [359, 290], [646, 538], [156, 643], [248, 276], [358, 154], [33, 605], [64, 459], [557, 617], [133, 8], [317, 397], [510, 431], [601, 506], [277, 311], [654, 641], [435, 194], [175, 103], [478, 549], [147, 555], [245, 288], [390, 252], [14, 477], [438, 463], [266, 231], [554, 243], [461, 504], [562, 452], [66, 183], [69, 350], [67, 252], [386, 435], [513, 161], [489, 529], [348, 253], [114, 365], [22, 503], [298, 232], [619, 589], [283, 341], [478, 449], [282, 272], [417, 192], [532, 352], [642, 174], [349, 557], [211, 230], [573, 202], [370, 393], [590, 24], [413, 409], [163, 488], [520, 439], [386, 204], [379, 658], [520, 469], [86, 60], [352, 531], [41, 11], [301, 4], [638, 146], [283, 526], [299, 451], [458, 319], [345, 288], [558, 339], [668, 391], [378, 437], [172, 249], [549, 108], [545, 370], [244, 544], [243, 544], [653, 571], [638, 487], [79, 551], [374, 22], [565, 29], [534, 537], [171, 166], [655, 256], [459, 340], [299, 173], [44, 255], [10, 482], [351, 166], [126, 501], [307, 375], [389, 368], [313, 267], [221, 270], [493, 33], [377, 362], [382, 297], [331, 441], [626, 407], [581, 455], [267, 58], [212, 409], [387, 371], [332, 267], [510, 59], [431, 546], [619, 14], [185, 648], [229, 259], [584, 182], [460, 510], [494, 445], [324, 347], [634, 301], [394, 366], [275, 186], [319, 432], [604, 289], [113, 15], [483, 345], [516, 151], [583, 393], [499, 32], [350, 118], [298, 519], [16, 571], [165, 217], [128, 531], [160, 321], [551, 576], [6, 631], [101, 139], [356, 591], [362, 116], [578, 479], [5, 258], [545, 392], [617, 321], [341, 113], [49, 626], [583, 154], [343, 279], [122, 84], [347, 407], [77, 6], [635, 623], [88, 110], [392, 195], [20, 148], [529, 531], [161, 240], [89, 356], [514, 194], [271, 167], [509, 564], [255, 335], [245, 111], [487, 168], [232, 227], [296, 117], [299, 68], [517, 327], [282, 298], [454, 259], [460, 62], [34, 167], [669, 407], [370, 300], [437, 501], [518, 460], [539, 483], [152, 531], [670, 407], [517, 400], [444, 527], [163, 592], [602, 21], [402, 377], [621, 17], [619, 299], [499, 591], [329, 7], [631, 14], [667, 658], [626, 554], [309, 427], [132, 600], [623, 381], [193, 320], [273, 523], [642, 77], [585, 322], [459, 69], [8, 428], [577, 473], [307, 98], [417, 162], [596, 497], [174, 237], [262, 420], [344, 95], [414, 634], [189, 24], [549, 271], [69, 130], [156, 347], [486, 187], [193, 491], [23, 105], [40, 32], [492, 379], [140, 399], [382, 90], [620, 212], [562, 174], [183, 431], [506, 325], [5, 172], [31, 554], [469, 58], [51, 200], [50, 115], [279, 163], [314, 85], [646, 436], [348, 348], [109, 444], [232, 486], [650, 204], [446, 565], [9, 124], [80, 201], [246, 366], [126, 245], [473, 411], [162, 163], [175, 211], [127, 292], [40, 471], [660, 508], [417, 21], [24, 373], [299, 582], [540, 265], [30, 225], [293, 6], [217, 626], [333, 417], [116, 193], [126, 17], [80, 376], [80, 643], [418, 29], [585, 378], [310, 194], [153, 39], [232, 192], [191, 489], [393, 442], [389, 545], [167, 218], [488, 168], [531, 638], [638, 252], [361, 319], [185, 13], [276, 362], [431, 102], [64, 293], [170, 143], [537, 421], [617, 316], [246, 316], [102, 538], [246, 519], [74, 255], [647, 293], [329, 380], [578, 5], [474, 247], [623, 264], [448, 448], [570, 98], [641, 204], [363, 159], [117, 55], [365, 339], [522, 116], [509, 178], [449, 119], [611, 538], [276, 102], [344, 155], [357, 244], [307, 455], [302, 572], [398, 10], [207, 599], [478, 289], [583, 163], [170, 238], [93, 593], [302, 123], [347, 8], [540, 75], [279, 434], [218, 447], [226, 505], [450, 473], [178, 522], [508, 55], [334, 13], [615, 165], [283, 121], [325, 574], [600, 41], [364, 142], [343, 641], [145, 643], [635, 287], [444, 117], [342, 299], [16, 574], [236, 197], [455, 108], [470, 425], [261, 273], [436, 287], [495, 471], [259, 183], [288, 33], [24, 374], [13, 655], [437, 516], [517, 607], [610, 373], [323, 350], [348, 332], [111, 308], [41, 372], [288, 125], [367, 444], [412, 379], [459, 208], [28, 178], [88, 410], [452, 464], [365, 119], [220, 55], [20, 115], [270, 104], [72, 223], [520, 369], [14, 185], [537, 102], [97, 420], [567, 509], [198, 282], [521, 386], [7, 10], [669, 142], [364, 45], [215, 347], [222, 427], [665, 219], [474, 330], [217, 127], [629, 570], [140, 260], [670, 556], [529, 227], [51, 68], [656, 348], [12, 339], [423, 57], [380, 322], [620, 572], [167, 169], [554, 67], [60, 487], [614, 622], [482, 283], [101, 427], [57, 33], [358, 308], [470, 101], [663, 71], [278, 631], [554, 62], [394, 37], [146, 454], [331, 338], [92, 334], [533, 306], [620, 558], [408, 206], [377, 152], [79, 151], [401, 518], [17, 634], [159, 403], [360, 215], [20, 60], [184, 64], [456, 79], [189, 382], [24, 31], [55, 256], [425, 404], [303, 59], [567, 462], [425, 141], [448, 372], [637, 106], [41, 287], [170, 129], [137, 341], [38, 127], [457, 141], [82, 91], [260, 431], [173, 8], [303, 107], [339, 211], [565, 365], [55, 161], [142, 191], [259, 522], [176, 208], [429, 220], [643, 429], [323, 19], [181, 454], [543, 275], [338, 602], [192, 582], [627, 312], [668, 472], [62, 531], [124, 365], [104, 352], [478, 251], [519, 420], [318, 0], [303, 290], [102, 386], [247, 190], [282, 298], [542, 588], [562, 655], [583, 63], [198, 32], [546, 49], [442, 372], [408, 105], [384, 101], [346, 350], [416, 443], [658, 55], [53, 79], [540, 435], [429, 621], [360, 49], [529, 292], [198, 384], [311, 324], [554, 455], [551, 649], [47, 179], [188, 535], [661, 102], [316, 63], [304, 195], [551, 509], [188, 173], [27, 280], [657, 584], [47, 164], [11, 463], [442, 84], [340, 474], [326, 13], [632, 620], [400, 447], [273, 340], [46, 221], [397, 179], [319, 358], [430, 291], [220, 300], [90, 594], [365, 336], [627, 48], [20, 195], [599, 354], [368, 148], [217, 590], [60, 437], [295, 413], [510, 16], [616, 113], [295, 313], [381, 251], [269, 145], [424, 621], [306, 505], [52, 209], [189, 76], [40, 338], [282, 73], [61, 11], [7, 521], [499, 568], [459, 262], [76, 68], [263, 6], [335, 426], [611, 197], [241, 357], [237, 181], [453, 548], [538, 625], [319, 223], [177, 599], [252, 3], [505, 67], [655, 330], [173, 656], [617, 424], [589, 248], [212, 588], [177, 482], [189, 433], [643, 600], [507, 400], [506, 650], [13, 193], [580, 574], [599, 442], [533, 373], [316, 255], [453, 508], [644, 162], [290, 443], [632, 63], [498, 51], [311, 463], [504, 371], [334, 484], [422, 411], [30, 188], [609, 594], [512, 187], [389, 374], [450, 39], [200, 18], [376, 350], [410, 500], [176, 380], [83, 290], [204, 648], [84, 387], [330, 294], [579, 454], [1, 379], [400, 269], [153, 51], [456, 88], [646, 645], [345, 34], [435, 24], [100, 30], [394, 430], [584, 350], [403, 564], [657, 40], [262, 56], [647, 578], [178, 157], [156, 39], [493, 591], [483, 24], [541, 324], [129, 296], [62, 285], [288, 218], [326, 292], [619, 636], [660, 629], [56, 544], [574, 315], [604, 97], [83, 523], [354, 274], [372, 100], [542, 157], [308, 395], [122, 424], [315, 248], [87, 416], [500, 613], [319, 166], [20, 261], [105, 317], [588, 341], [584, 292], [123, 114], [6, 219], [250, 152], [589, 83], [640, 517], [444, 504], [596, 352], [166, 666], [564, 49], [12, 181], [328, 403], [147, 309], [15, 584], [541, 566], [308, 243], [339, 525], [394, 413], [157, 468], [129, 668], [313, 631], [641, 552], [567, 177], [486, 331], [487, 69], [352, 266], [130, 169], [344, 451], [353, 513], [137, 657], [323, 493], [245, 58], [466, 446], [653, 435], [41, 255], [464, 72], [517, 316], [507, 620], [284, 497], [194, 618], [292, 417], [369, 178], [319, 68], [495, 484], [399, 145], [201, 137], [612, 213], [352, 574], [326, 113], [555, 190], [645, 606], [85, 155], [259, 51], [643, 264], [307, 267], [392, 371], [53, 563], [437, 345], [499, 398], [52, 130], [72, 452], [464, 390], [345, 346], [488, 387], [319, 182], [418, 387], [289, 596], [592, 337], [530, 171], [290, 451], [383, 632], [497, 121], [509, 411], [337, 541], [489, 85], [282, 112], [547, 635], [391, 206], [112, 552], [475, 435], [157, 580], [632, 180], [521, 387], [639, 247], [122, 583], [535, 485], [25, 412], [632, 549], [468, 166], [532, 84], [143, 461], [263, 130], [145, 582], [556, 368], [338, 84], [95, 365], [83, 117], [216, 380], [136, 242], [513, 181], [133, 371], [661, 379], [653, 318], [536, 552], [489, 588], [203, 659], [117, 647], [405, 100], [299, 318], [129, 173], [567, 187], [260, 282], [327, 568], [212, 121], [237, 345], [655, 330], [451, 42], [542, 264], [294, 634], [248, 70], [209, 299], [669, 137], [190, 493], [301, 588], [603, 353], [348, 42], [319, 49], [281, 530], [343, 427], [503, 563], [1, 39], [3, 298], [99, 624], [139, 489], [79, 280], [445, 500], [140, 115], [548, 287], [204, 664], [385, 408], [521, 522], [87, 16], [132, 601], [650, 623], [292, 488], [492, 4], [76, 482], [158, 112], [166, 3], [420, 588], [560, 342], [558, 580], [656, 524], [373, 407], [267, 343], [378, 227], [101, 450], [447, 185], [242, 209], [420, 101], [609, 349], [220, 247]];

      var myInterval = setInterval(function ()
      {
         console.log("setInterval");
         drawDot(aContext);
      }, kDrawDelay);

      initElements ();

      function getAngle(anInd)
      {
         if (anInd - 2 > 0 && anInd < aCoord.length )
         {

            var p1 = {x: aCoord[anInd-2][0],y: aCoord[anInd-2][1]};
            var p2 = {x: aCoord[anInd-1][0],y: aCoord[anInd-1][1]};
            var p3 = {x: aCoord[anInd][0],y: aCoord[anInd][1]};
            var p12 = Math.sqrt(Math.pow((p1.x - p2.x),2) + Math.pow((p1.y - p2.y),2));
            var p13 = Math.sqrt(Math.pow((p1.x - p3.x),2) + Math.pow((p1.y - p3.y),2));
            var p23 = Math.sqrt(Math.pow((p2.x - p3.x),2) + Math.pow((p2.y - p3.y),2));

            //angle in radians
            //var aRes = Math.acos(((Math.pow(p12, 2)) + (Math.pow(p13, 2)) - (Math.pow(p23, 2))) / (2 * p12 * p13));

            //angle in degrees
            var aRes = findAngle(p1, p2, p3)  * 180 / Math.PI;
                  //  Math.acos(((Math.pow(p12, 2)) + (Math.pow(p13, 2)) - (Math.pow(p23, 2))) / (2 * p12 * p13)) * 180 / Math.PI;
            return aRes.toFixed(1);

         }
         return anInd;
      }

      function findAngle(p0,p1,p2)
      {
         var a = Math.pow(p1.x - p0.x, 2) + Math.pow(p1.y - p0.y, 2),
                 b = Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2),
                 c = Math.pow(p2.x - p0.x, 2) + Math.pow(p2.y - p0.y, 2);
         return Math.acos((a + b - c) / Math.sqrt(4 * a * b));
      }

      function drawDot(theContext)
      {
         //console.log("drawDot: " + anInd);


         if (anInd < aCoord.length)
         {
            if (kDrawBound)
            {
               if (anInd+1<aBoundCoord.length)
               {
                  theContext.strokeStyle = "#33FF44";
                  theContext.strokeRect(aBoundCoord[anInd+1][0], aBoundCoord[anInd+1][1], 1, 1);
               }
               if (aInd - 1 >= 0)
               {
                  theContext.strokeStyle = "#FFFFFF";
                  theContext.strokeRect(aBoundCoord[anInd-1][0], aBoundCoord[anInd-1][1], 1, 1);
               }
            }

            for (var i = 0; i <= aColors.length && i < anInd; i++)
            {
               theContext.strokeStyle = aColors[i];
               theContext.strokeRect(aCoord[anInd - i][0], aCoord[anInd - i][1], 1, 1);
            }

            if ( kDrawLine &&
                    anInd - 1 > 0)
            {
               if (kWipeLine && anInd - kLineNum-1 > 0)
               {
                  var aLastLIneInd = anInd - kLineNum-1;
                  theContext.beginPath(); //ADD THIS
                  theContext.moveTo(aCoord[aLastLIneInd][0], aCoord[aLastLIneInd][1]);
                  theContext.lineTo(aCoord[aLastLIneInd+1][0], aCoord[aLastLIneInd+1][1]);
                  theContext.strokeStyle = "#FFFFFF";
                  theContext.stroke();
               }
               theContext.beginPath(); //ADD THIS
               theContext.moveTo(aCoord[anInd - 1][0], aCoord[anInd - 1][1]);
               theContext.lineTo(aCoord[anInd][0], aCoord[anInd][1]);
               theContext.strokeStyle = aColors[aColors.length - 1];
               theContext.stroke();
            }

            if (kAngleTable)
            {
               var aCell = document.createElement("div");
               var anAngle = getAngle(anInd);
               aCell.innerHTML = anAngle;
               if(anAngleTable.firstChild)
               {
                  anAngleTable.insertBefore(aCell,anAngleTable.firstChild);
               } else
               {
                  anAngleTable.appendChild(aCell);
               }

            }

            anInd++;
            //if (anInd % 10 == 0)
            {
               document.getElementById("process").innerHTML = "..." + anInd;
            }
         } else
         {
            document.getElementById("process").innerHTML = "Done!  " + anInd;
            clearInterval(myInterval);
         }
      }

      function spiral(theInd)
      {
         var k = Math.ceil((Math.sqrt(theInd) - 1) / 2);
         var t = 2 * k + 1;
         var m = t * t;
         var t = t - 1;
         if (theInd >= m - t)
         {
            return [k - (m - theInd), -k];
         } else
         {
            m = m - t;
         }

         if (theInd >= m - t)
         {
            return [-k, -k + (m - theInd)];
         } else
         {
            m = m - t;
         }
         if (theInd >= m - t)
         {
            return [-k + (m - theInd), k];
         }
         return [k, k - (m - theInd - t)];
      }

      function initElements()
      {
         document.getElementById("break").onclick = function(theEvent){
            if (theEvent.srcElement.innerHTML === " Stop ")
            {
               theEvent.srcElement.innerHTML = " Start ";
               clearInterval(myInterval);
            } else
            {
               theEvent.srcElement.innerHTML = " Stop ";
               myInterval = setInterval(function ()
               {
                  console.log("setInterval");
                  drawDot(aContext);
               }, kDrawDelay);
            }
         };

         document.getElementById("iterate").onclick = function(theEvent){
            drawDot(aContext);
         };
      }
   }());

</script>

</body>
</html>

